<!doctype html>
<html>
<head>
    <title>Spyfall</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="themes/lpt.min.css" />
<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
<link rel="stylesheet" href="//code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
	<style>
	.label-inline {float:left;}
	#locationVal{font-size: 2.5em;}
	#passToPlayer{font-size: 3.5em;}
	.currentPlayer{font-size: 2em;}
	.currentRound{font-size: 2em;}
	#countdown{font-size:6.5em;}
	.center-button{
		margin: 0 auto;
		}
			.center-wrapper{
		text-align: center;
		}
		.center-wrapper * {
		margin: 0 auto;
		}
		.settingsBtn {margin: 0.4em; float: right}
		.footnote{font-size: 0.7em; font-weight: normal;}
	</style>
</head>
<body>

<div data-role="page" id="setup">

	<div data-role="header">
		<h1>Welcome to Spyfall</h1>
		<button class="locationsBtn ui-btn-right">Locations</button>
	</div>
	<div data-role="content"  data-theme="b">
		<button data-role="button" id="setupBtn">Play</button>
	</div>
	<div data-role="content" data-theme="a">
		<h2 class="label-inline" style="margin-right: 10px">Players</h2>
		<select name="playerCount" id="playerCountOption" class="label-inline">
			<option value="4">4</option>
			<option value="5" selected>5</option>
			<option value="6">6</option>
			<option value="7">7</option>
			<option value="8">8</option>
		</select>

		<button class="audiotest" data-role="button">test Audio</button>
	</div>
	<div data-role="footer">
		<button class="restartBtn ui-state-disabled" data-role="button" data-inline="true" data-icon="home" data-iconpos="notext">Home</button>
		<button class="gamePlayBtn">Timer</button>
		<span class="footnote">
		 <a href="http://international.hobbyworld.ru/catalog/25-spyfall/">Spyfall</a> is designed by Alexandr Ushan and published by <a href="http://international.hobbyworld.ru/">Hobby World</a>
		</span>
		<!--button class="settingsBtn ui-btn-right" data-icon="gear" data-iconpos="notext">Settings</button-->
		<audio id="audiotag1" src="sounds/Ship_Bell.mp3" preload="auto"></audio>
	</div>
</div><!-- /page one -->

<div data-role="page" id="pass" data-theme="b">

	<div data-role="header">
		<h1><span class="playerCount"></span> Players</h1>
	</div>

	<div data-role="content" >
		<button data-role="button" id="passBtn">Ready</button>
		<p class="center-wrapper">
			<span>Pass to Player: </span>
			<span class="currentPlayer" id="passToPlayer"></span>
		</p>
		<p class="center-wrapper">Round: <span class="currentRound"></span></p>
	</div>	
	<div data-role="footer">
		<button class="restartBtn" data-role="button" data-inline="true" data-icon="home" data-iconpos="notext">Home</button>
		
		<button class="gamePlayBtn ui-btn-right">Timer</button>
	</div>
</div><!-- /page two -->

<div data-role="page" id="clue" data-theme="b">
	<div data-role="header">
		 <h1>Clue</h1>
	</div>
	<div data-role="content">
	<button data-role="button" data-icon="star" data-direction="reverse" id="clueContinueBtn">Continue</button>
		<p class="center-wrapper">Location: 
			<span id="locationVal" ></span>
		</p>
		<p class="center-wrapper">Round: <span class="currentRound"></span>, Player: <span class="currentPlayer" >1</span>
		</p>
	</div>
	<div data-role="footer">
		<button class="restartBtn" data-role="button" data-inline="true" data-icon="home" data-iconpos="notext">Home</button>
		
		<button class="gamePlayBtn ui-btn-right">Timer</button>
	</div>
</div><!-- /page three -->


<div data-role="page" id="gamePlay" data-theme="e">
	<div data-role="header">
		<h1>Timer</h1>
		<button class="locationsBtn ui-btn-right">Locations</button>
	</div>
	<div data-role="content">
		<div data-role="content"  data-theme="b">
		<button data-role="button" class="startNewRoundBtn">Next Round</button>
		</div>
		
		<div class="center-wrapper">
		<span id="countdown"></span>
		<p>
		<button id="runTimerBtn" data-role="button" data-inline="true">Start/Stop</button>
		
		<button id="resetTimerBtn" data-role="button" data-inline="true" data-icon="refresh">Reset</button>
		</p>
		<p>
		<button href="#" id="addTimerBtn" data-role="button" data-inline="true" data-icon="plus">1 minute</button>
		<button href="#" id="subTimerBtn" data-role="button" data-inline="true" data-icon="minus">1 minute</button>
		<button class="restartRoundBtn" data-role="button" >Restart this Round</button>
		<button class="roundSummary" data-role="button" >Summary</button>
		</p>
		</div>
	</div>
	<div data-role="footer">
		<button class="restartBtn" data-role="button" data-inline="true" data-icon="home" data-iconpos="notext">Home</button>
		<!--button class="settingsBtn ui-btn-right" data-icon="gear" data-iconpos="notext">Settings</button-->
	</div>
</div><!-- /page four -->

<div data-role="page" id="locations"  data-theme="c">
	<div data-role="header">
		<h1>Locations</h1>
		<a href="#" data-role="button" data-icon="delete" data-rel="back">Back</a>
	</div>
	<div data-role="content" >
		<ol id="locationlist" data-role="listview" data-divider-theme="d">
		</ol>
	</div>
	<div data-role="footer">
		
	</div>
</div>

<div data-role="page" id="settings"  data-theme="c">
	<div data-role="header">
		<h1>Settings</h1>
		<a href="index.html" data-icon="delete" data-rel="back">Back</a>
	</div>
	<div data-role="content" >	
		<p class="center-wrapper">
		<button class="audiotest" data-role="button">test Audio</button>

	</div>
	<div data-role="footer">
		Spyfall
	</div>
</div>
<div data-role="page" id="roundSummary"  data-theme="c">
	<div data-role="header">
		<h1>Roles Summary</h1>
		<a href="#" data-role="button" data-icon="carat-l" data-rel="back">Back</a>
	</div>
	<div data-role="content" >	
		<ul id="summaryList" data-role="listview"></ul>
	</div>
	<div data-role="footer">
		&nbsp;
	</div>
</div>
</body>
</html>

<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<script src="lib/SpyGame.js"></script>
<script src="lib/SpyController.js"></script>
<script src="lib/Timer.js"></script>
    
<script>
var game = new Spy.Game();
var controller = new lpt.SpyController(game);

$('.restartBtn').on('click',   controller.showStart);
$('#setupBtn').on('click',     controller.setupGame);
$('.locationsBtn').on('click', controller.showLocations);
$('.gamePlayBtn').on('click',  controller.showGamePlay);

$('#passBtn').on('click',          controller.showPlayersRole);
$('#clueContinueBtn').on('click',  controller.doneShowingRole);
$('.startNewRoundBtn').on('click',       controller.startNewRound);
$('.restartRoundBtn').on('click',       controller.restartRound);
$('.roundSummary').on('click',       controller.roundSummary);

// $('.settingsBtn').on('click', SpyfallController.showSettings);
// $('#saveSettingsBtn').on('click', SpyfallController.saveSettings);

$('.audiotest').on('click',function(){
	document.getElementById('audiotag1').play();
});

var timer = new Countdown.Timer('countdown', 'audiotag1');
$('#runTimerBtn').on('click', timer.Start);
$('#resetTimerBtn').on('click', timer.Reset);
$('#addTimerBtn').on('click', timer.addOne);
$('#subTimerBtn').on('click', timer.subOne);
$('#gamePlay').bind('pageinit', function() {
    $('#startTimerBtn').button().button('enable');
	$('#stopTimerBtn').button().button('disable');
});
$(document).bind('pageinit', controller.pageCheck);

</script>